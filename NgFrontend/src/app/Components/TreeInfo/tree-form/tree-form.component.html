<p-accordion [activeIndex]="0">
  <p-accordionTab
    header="Tree description"
    [headerStyleClass]="'my-accordion-header'"
  >
    <form [formGroup]="form" class="row g-3" (ngSubmit)="onSubmit()">
      <app-custom-input
        name="display_name"
        placeholder="Tree name"
        [formName]="'display_name'"
        class="col-md-6"
      ></app-custom-input>

      <app-custom-input
        name="latin_name"
        placeholder="Latin name"
        [formName]="'latin_name'"
        class="col-md-6"
      >
      </app-custom-input>

      <app-custom-input
        name="description"
        placeholder="Description"
        class="col-12 description-std"
        [formName]="'description'"
        [type]="InputType.TEXTAREA"
      ></app-custom-input>

      <app-custom-input
        class="col-12 description-std"
        name="placement"
        placeholder="Placement"
        [formName]="'placement'"
        [type]="InputType.TEXTAREA"
      ></app-custom-input>

      <app-custom-input
        name="watering"
        placeholder="Watering"
        class="col-12 description-std"
        [type]="InputType.TEXTAREA"
        [formName]="'watering'"
      ></app-custom-input>

      <app-custom-input
        name="fertilizing"
        placeholder="Fertilizing"
        class="col-12 description-std"
        [type]="InputType.TEXTAREA"
        [formName]="'fertilizing'"
      ></app-custom-input>

      <app-custom-input
        name="pruning_wiring"
        placeholder="Pruning wiring"
        class="col-12 description-std"
        [type]="InputType.TEXTAREA"
        [formName]="'pruning_wiring'"
      ></app-custom-input>

      <app-custom-input
        name="repotting"
        placeholder="Repotting"
        class="col-12 description-std"
        [type]="InputType.TEXTAREA"
        [formName]="'repotting'"
      ></app-custom-input>

      <app-custom-input
        name="propagation"
        placeholder="Propagation"
        class="col-12 description-std"
        [type]="InputType.TEXTAREA"
        [formName]="'propagation'"
      ></app-custom-input>

      <app-custom-input
        name="pests"
        placeholder="Pests"
        class="col-12 description-std"
        [type]="InputType.TEXTAREA"
        [formName]="'pests'"
      ></app-custom-input>

      <div class="form-check form-check-inline" style="width: unset">
        <app-custom-input
          [type]="InputType.CHECKBOX"
          formName="published"
          placeholder="Published"
        ></app-custom-input>
      </div>

      <div class="form-check form-check-inline" style="width: unset">
        <app-custom-input
          [type]="InputType.CHECKBOX"
          formName="delete"
          placeholder="Delete"
        ></app-custom-input>
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-primary" [disabled]="!form.valid">
          Submit
        </button>
        <button class="btn btn-secondary" routerLink="..">Cancel</button>
      </div>
    </form>
  </p-accordionTab>
  <p-accordionTab
    header="Techniques"
    [headerStyleClass]="'my-accordion-header'"
  >
    <form [formGroup]="form">
      <p-table
        [value]="formTechniques.controls"
        dataKey="value.oid"
      >
        <ng-template pTemplate="header">
          <tr>
            <th
              scope="col"
              class="min-w-250px"
            >
              Technique 
            </th>
            <th
              scope="col"
              class="min-w-250px"
            >
              Objective 
            </th>
            <th scope="col" class="min-w-250px">Stage</th>
            <th scope="col" class="min-w-250px">Period</th>
          </tr>
        </ng-template>
        <ng-template
          pTemplate="body"
          let-techniqueControl
          let-rowIndex="rowIndex"
        >
          <ng-container
            formArrayName="techniques"
            *ngLet="techniqueControl.value as techniqueMapper"
          >
            <tr [formGroupName]="rowIndex"
            >
              <td>
                    {{
                      techniqueMapper.technique
                        | entityIdToName : "technique"
                        | async
                    }}
              </td>
              <td>
                    {{
                      techniqueMapper.objective
                        | entityIdToName : "objective"
                        | async
                    }}
              </td>
              <td>
                    <div *ngFor="let stage of techniqueMapper.stage">
                      {{ stage | entityIdToName : "stage" | async }}
                    </div>
              </td>
              <td>
                  <ng-template pTemplate="output">
                    {{ techniqueMapper.period | periodIdToName }}
                  </ng-template>
              </td>
            </tr>
          </ng-container>
        </ng-template>
      </p-table>
    </form>
  </p-accordionTab>
</p-accordion>
